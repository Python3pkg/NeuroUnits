#! /usr/bin/python

import argparse
from neurounits import NeuroUnitParser, NutsIO


def build_parser():
    parser = argparse.ArgumentParser(description='Process some integers.')
    parser.add_argument('--validate', dest='validate', action='store_true')
    parser.add_argument('--extract-level', dest='extract', action='store', nargs=1)
    parser.add_argument('--extract-to', dest='extract_to', action='store', nargs=1)
    parser.add_argument('files', nargs='+')
    return parser





def validate_eqn(filename):
    print 'Validating:', filename
    f = NeuroUnitParser.File(open(filename).read())
    print '  ', f.summary()

def validate_nuts(filename):
    NutsIO.validate(filename)
    print 'Validating:', filename






def main():
    parser = build_parser()
    args= parser.parse_args()

    print args.files
    print 'validate', args.validate
    print 'extract', args.extract
    
    # Validation:
    for f in args.files:
        if f.endswith('.eqn'):
            validate_eqn(f)
        if f.endswith('nuts'):
            validate_nuts(f)
    
    # Extraction:


if __name__=='__main__':
    main()
